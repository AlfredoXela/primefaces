<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:sec="https://joinfaces.org/security"
      xmlns:p="primefaces">
<h:head>
    <title><ui:insert name="titulo"/></title>
    <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="mobile-web-app-capable" content="yes"/>
    <h:outputStylesheet library="assets" name="css/primeflex.css"/>
    <h:outputStylesheet library="assets" name="css/primeicons.css"/>
    <h:outputStylesheet library="assets" name="css/style.css"/>
</h:head>

<h:body>
    <h:form id="form">
        <div class="app-container" style="display: flex; min-height: 100vh;">
            <!-- Barra lateral -->
            <div class="sidebar" style="width: 250px; background: #2c3e50; color: white; height: 100vh; display: flex; flex-direction: column;">
                <div class="sidebar-header" style="padding: 1.5rem; rgba(255, 255, 255, 0.1);">
                    <h3 class="m-0">DIAMOND</h3>
                    <small>Usuario <ui:insert name="nombreUsuario"/></small>
                </div>
                <div class="sidebar-menu" style="flex-grow: 1; overflow-y: auto;">
                    <p:menu style="width: 100%; height: 100%; rgba(255, 255, 255, 0.1);" >
                        <p:submenu label="NAVEGACIÓN">
                            <p:menuitem value="Inicio" outcome="/home.xhtml" icon="pi pi-home"/>
                            <p:menuitem value="Nosotros" outcome="/nosotros.xhtml" icon="pi pi-info-circle"/>
                            <p:menuitem value="Preguntas" outcome="/preguntas.xhtml" icon="pi pi-question"/>
                        </p:submenu>
                        <sec:authorize access="hasRole('ROLE_ADMIN')">
                            <p:submenu label="ADMINISTRACIÓN">
                                <p:menuitem value="Inicio Admin" outcome="/admin/home-admin.xhtml" icon="pi pi-user"/>
                                <p:menuitem value="Máquinas" outcome="/admin/catMaquinas.xhtml" icon="pi pi-cog"/>
                                <p:menuitem value="Membresías" outcome="/admin/membresias.xhtml" icon="pi pi-id-card"/>
                            </p:submenu>
                        </sec:authorize>
                        <sec:authorize access="hasRole('ROLE_USER')">
                            <p:submenu label="USUARIO">
                                <p:menuitem value="Mi Panel" outcome="/operario/home-ope.xhtml" icon="pi pi-user"/>
                            </p:submenu>
                        </sec:authorize>
                        <div style="margin-top: auto; padding: 10px; margin-bottom: 20px;">
                            <p:menuitem value="Cerrar Sesión" url="/logout" icon="pi pi-sign-out"/>
                        </div>
                    </p:menu>

                </div>

            </div>

            <!-- Contenido principal -->
            <div class="main-content" style="flex: 1; padding: 1.5rem; background-color: #f8f9fa;">
                <div class="topbar" style="background: white; display: flex; justify-content: space-between;">
                    <h3>Sistema de Gestión</h3>
                    <p:commandButton type="button" icon="pi pi-user" styleClass="p-button-rounded p-button-text" style="width: 40px; height: 40px;"/>
                </div>

                <div class="content-area">
                    <h1>Bienvenido <ui:insert name="nombreUsuario"/></h1>
                    <p>Estás dentro del <ui:insert name="nombrePagina"/>.</p>
                    <div class="card">
                        <ui:insert name="contenido" id="contenedor"/>
                    </div>
                </div>
            </div>
        </div>
    </h:form>
</h:body>
</html>